<_page__tech__title>
Technical details
</_page__tech__title>

<_page__tech__description>
Preloading is done with &lt;link rel=&quot;prefetch&quot; href=&quot;url&quot;&gt;.
</_page__tech__description>

<_page__tech__content>
<h1 class="title">Technical details</h1>

<p>Preloading is done with &lt;link rel="prefetch" href="<em>url</em>"&gt;.</p>

<p>The <a href="https://github.com/instantpage/instant.page" data-instant>source code</a> is 170 readable lines.</p>

<h2 id="browser-support">Browser support</h2>

<p>instant.page is progressive enhancement — there’s no impact on browsers that don’t support it.</p>

<p>Chrome has full support.</p>

<p>Firefox supports &lt;link rel="prefetch"&gt; but will redownload the page if it’s not cached. The popular extension uBlock Origin disables prefetching.</p>

<h3 id="unsupported-browsers">Incompatible browsers</h3>

<p>Safari doesn’t support &lt;link rel="prefetch"&gt;. The upcoming version 13 supports it, but it’s disabled by default. Hopefully it will be enabled in March.</p>

<p>UC Browser doesn’t support modules, but it should support them later this year as a new version based on Chrome 69 is in preparation.</p>

<p>Edge doesn’t support &lt;link rel="prefetch"&gt; but is going to adopt Chrome’s engine which does.</p>

<h2 id="cdn">Secure CDN</h2>

<p>instant.page’s script is hosted serverless with <a href="https://www.cloudflare.com/products/cloudflare-workers/">Cloudflare Workers</a> so that there’s no server to hack into. <span class="footnote-button"></span></p>

<div class="footnote-content">
  <p>Cloudflare provided me with free Workers in order to be able to securely serve the script to a potentially very large number of people.</p>
</div>

<p>Additionally, it uses <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity">subresource integrity</a> to let modern browsers verify that the file hasn’t been tampered with. It’s loaded as a module so that most old browsers won’t execute it. <span class="footnote-button"></span></p>

<div class="footnote-content">
  <p>The only browser versions that implement modules without implementing subresource integrity are Edge 16, Safari 10.1 and Safari 11.0. They account for 0.8% of page views.</p>
</div>

<h2 id="self-hosting">Self-hosting</h2>

<p>Hosting the script yourself is also possible. <a href="/{{VERSIONS_LATEST}}" download="instantpage-{{VERSIONS_LATEST}}.js">Download the latest version</a> then add a module script tag just before &lt;/body&gt;:</p>

<code class="code code--block">&lt;script src="instantpage-{{VERSIONS_LATEST}}.js" type="module" defer&gt;&lt;/script&gt;</code>

<p>You can also install it via npm: <code class="code">npm i instant.page</code></p>

<h2 id="history">History</h2>

<p>The idea of preloading web pages on hover and touchstart comes from an older library of mine, <a href="http://instantclick.io/">InstantClick</a>, which uses Ajax and <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API">history.pushState</a> instead of &lt;link rel="prefetch"&gt;, transforming a site into a single-page application. It makes a site even smoother but requires additional work.</p>

<p>InstantClick is unfortunately mostly just a proof of concept as it doesn’t have good documentation.</p>

<p>Google’s recent release of <a href="https://github.com/GoogleChromeLabs/quicklink">quicklink</a>, which preloads links with &lt;link rel="prefetch"&gt; as soon as they are shown, made it clear that I should focus on building a “lite”, easier to use version of InstantClick, which is instant.page.</p>

<h2 id="future-projects">Future related projects</h2>

<p>InstantClick provides one of the smoothest experiences possible, while still not requiring as much work as a framework (who give lesser results), so I’m considering working on it again later on.</p>

<p>I also plan to research how this just-in-time preloading concept might fit into React/Vue/Angular, as those are popular and incompatible with InstantClick’s simplified SPA model. (I currently have no experience with those frameworks.)</p>

<include>cta-widget</include>
</_page__tech__content>
