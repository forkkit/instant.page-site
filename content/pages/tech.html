<_page__tech__title>
Technical details
</_page__tech__title>

<_page__tech__description>
Preloading is done with &lt;link rel=&quot;prefetch&quot; href=&quot;url&quot;&gt;.
</_page__tech__description>

<_page__tech__content>
<h1 class="title">Technical details</h1>

<p>Preloading is done with &lt;link rel="prefetch" href="<em>url</em>"&gt;.</p>

<p>The <a href="https://github.com/instantpage/instant.page">source code</a> is 125 readable lines.</p>

<p>
  <a class="button button--github" href="https://github.com/instantpage/instant.page">
    <svg class="button__github-logo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="40px" height="40px" viewBox="12 12 40 40" enable-background="new 12 12 40 40" xml:space="preserve">
      <path fill="#444" d="M32 13.4c-10.5 0-19 8.5-19 19c0 8.4 5.5 15.5 13 18c1 0.2 1.3-0.4 1.3-0.9c0-0.5 0-1.7 0-3.2 c-5.3 1.1-6.4-2.6-6.4-2.6C20 41.6 18.8 41 18.8 41c-1.7-1.2 0.1-1.1 0.1-1.1c1.9 0.1 2.9 2 2.9 2c1.7 2.9 4.5 2.1 5.5 1.6 c0.2-1.2 0.7-2.1 1.2-2.6c-4.2-0.5-8.7-2.1-8.7-9.4c0-2.1 0.7-3.7 2-5.1c-0.2-0.5-0.8-2.4 0.2-5c0 0 1.6-0.5 5.2 2 c1.5-0.4 3.1-0.7 4.8-0.7c1.6 0 3.3 0.2 4.7 0.7c3.6-2.4 5.2-2 5.2-2c1 2.6 0.4 4.6 0.2 5c1.2 1.3 2 3 2 5.1c0 7.3-4.5 8.9-8.7 9.4 c0.7 0.6 1.3 1.7 1.3 3.5c0 2.6 0 4.6 0 5.2c0 0.5 0.4 1.1 1.3 0.9c7.5-2.6 13-9.7 13-18.1C51 21.9 42.5 13.4 32 13.4z"/>
    </svg>
    Star on GitHub
  </a>
</p>

<h2 id="browser-support">Browser support</h2>

<p>instant.page is progressive enhancement — there’s no impact on browsers that don’t support it.</p>

<p>Chrome has full support.</p>

<p>Firefox supports &lt;link rel="prefetch"&gt; but will redownload the page if it’s not cached.</p>

<h3 id="unsupported-browsers">Incompatible browsers</h3>

<p>Safari doesn’t support &lt;link rel="prefetch"&gt;.</p>

<p>UC Browser doesn’t support modules, but it should support them later this year as a new version based on Chrome 69 is in preparation.</p>

<p>Edge doesn’t support &lt;link rel="prefetch"&gt; but is going to adopt Chrome’s engine which does.</p>

<h2 id="cdn">Secure CDN</h2>

<p>instant.page’s script is hosted serverless with <a href="https://www.cloudflare.com/products/cloudflare-workers/">Cloudflare Workers</a> so that there’s no server to hack into. <span class="footnote-button"></span></p>

<div class="footnote-content">
  <p>Cloudflare provided me with free Workers in order to be able to securely serve the script to a potentially very large number of people.</p>
</div>

<p>Additionally, it uses <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity">subresource integrity</a> to let modern browsers verify that the file hasn’t been tampered with. It’s loaded as a module so that most old browsers won’t execute it. <span class="footnote-button"></span></p>

<div class="footnote-content">
  <p>The only browser versions that implement modules without implementing subresource integrity are Edge 16, Safari 10.1 and Safari 11.0. They account for about 1% of page views.</p>
</div>

<h2 id="history">History</h2>

<p>The idea of preloading web pages on hover and touchstart comes from an older library of mine, <a href="http://instantclick.io/">InstantClick</a>, which uses Ajax and <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API">history.pushState</a> instead of &lt;link rel="prefetch"&gt;, transforming a site into a single-page application. It makes a site even smoother but requires additional work.</p>

<p>InstantClick is unfortunately mostly a proof of concept as it doesn’t have good documentation.</p>

<p>Google’s recent release of <a href="https://github.com/GoogleChromeLabs/quicklink">quicklink</a>, which preloads links with &lt;link rel="prefetch"&gt; as soon as they are shown, made it clear that I should focus on building a “lite”, easier to use version of InstantClick, which is instant.page.</p>

<h2 id="future-projects">Future related projects</h2>

<p>InstantClick provides one of the smoothest experiences possible, while still not requiring as much work as a framework (who give lesser results), so I’m considering working on it again later on.</p>

<p>I also plan to research how this just-in-time preloading concept might fit into React/Vue/Angular, as those are popular and incompatible with InstantClick’s simplified SPA model. (I currently have no experience with those frameworks.)</p>

<include>cta-widget</include>
</_page__tech__content>
